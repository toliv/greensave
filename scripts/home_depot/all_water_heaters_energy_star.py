import requests

## Generated link from https://www.homedepot.com/b/Plumbing-Water-Heaters/Residential/Energy-Star/Electric/Gas/N-5yc1vZbqlyZ1z109ppZ1z109sqZ1z109srZ1z1cmtuZ1z1wgir?NCNI-5

def get_water_heaters(offset=0):
    cookies = {
        '_abck': '18C96A4C12AB4CC3DA344CDECF1F3550~0~YAAQVVLbF34iOVSNAQAADVpXZwsk1Xk6T/iuPwbE+l4g2u19U1HZbiYln6Ejb1IsUVu60USMLrzIoDpymDMy8XhlR1NQuxv/CP9TDpGIOhNR9aiUhYhXeA00GIX8oMCBZHhieNq85X02JD1e9sUpqAy6tEaGVUZQTlafKM4hQcSTHCiQ4PhFYW4e2ezhgj1fgRRzMHsinh36U/9RGFvqApZJAyLjdiRpOPicRdE8kKlAXazZF+p6eZbS4/9YdMixuSXcVivnkm1dmqPbdF4319i/hBNaLP4fXP5z2JnQb6NIU72+xh73+u+Ri6JaSchJI+1zPlj1WyTegrNyQpVrJB+YdIFuSWQSa9zDCVvpqN2z+/QfdLIh5WnIUVmadsaPT7aKNhj/uvAqX5gbJ/+XAKo/i8ZKSF/e9x1OMg==~-1~-1~-1',
        'THD_PERSIST': '',
        'THD_CACHE_NAV_PERSIST': '',
        'DELIVERY_ZIP': '11232',
        'DELIVERY_ZIP_TYPE': 'DEFAULT',
        '_px_f394gi7Fvmc43dfg_user_id': 'ODQ1MzZkZTEtYmUwOC0xMWVlLWI2YTYtODkyM2VkYTQyYTg0',
        'AMCV_F6421253512D2C100A490D45%40AdobeOrg': '1585540135%7CMCMID%7C01742974330641885704821134802620270961%7CMCOPTOUT-1706842994s%7CNONE%7CvVersion%7C4.4.0',
        'thda.u': '8389bad2-f7dc-59ae-dca6-ea8c9b8737b4',
        'forterToken': '4849a93371444cbca0f8c3688c3d2704_1706835689264_78_UDF9_13ck',
        's_pers': '%20s_nr365%3D1706835782136-Repeat%7C1738371782136%3B',
        'ajs_anonymous_id': '5ac6a289-cabc-47aa-a1e8-1a6932fb1922',
        '_meta_neustar_mcvisid': '01742974330641885704821134802620270961',
        '_meta_neustar_aam': '',
        '_meta_metarouter_timezone_offset': '300',
        '_meta_adobe_fire': '{"xandr":false,"revjet":false}',
        'HD_DC': 'beta',
        'akavpau_prod': '1706836096~id=75c0cdfd123905a51235b2a138c61ec0',
        'akacd_usbeta': '3884268831~rv=10~id=94c0e54f1b89b62a6503e71c71f3e826',
        'THD_NR': '0',
        'at_check': 'true',
        'THD_SESSION': '',
        'THD_CACHE_NAV_SESSION': '',
        'THD_LOCALIZER': '%7B%22WORKFLOW%22%3A%22LOC_HISTORY_BY_IP%22%2C%22THD_FORCE_LOC%22%3A%221%22%2C%22THD_INTERNAL%22%3A%220%22%2C%22THD_LOCSTORE%22%3A%221225%2BBrooklyn%2C%20NY%20-%20Brooklyn%2C%20NY%2B%22%2C%22THD_STRFINDERZIP%22%3A%2211232%22%2C%22THD_STORE_HOURS%22%3A%221%3B8%3A00-20%3A00%3B2%3B6%3A00-22%3A00%3B3%3B6%3A00-22%3A00%3B4%3B6%3A00-22%3A00%3B5%3B6%3A00-22%3A00%3B6%3B6%3A00-22%3A00%3B7%3B6%3A00-22%3A00%22%2C%22THD_STORE_HOURS_EXPIRY%22%3A1706837670%7D',
        'AMCVS_F6421253512D2C100A490D45%40AdobeOrg': '1',
        'thda.s': '50369ed8-7c7c-5bd2-a7e7-0d1967ef23a9',
        'ecrSessionId': '76EFE0D1B112F7DC85D748E4701B969C',
        's_sess': '%20s_cc%3Dtrue%3B%20s_pv_pName%3Dplumbing%253Ewater%2520heaters%253Epagination%3B%20s_pv_pType%3Dplp%3B%20s_pv_cmpgn%3D%3B%20s_pv_pVer%3Dplp%253Aversion%253Agen2%3B%20stsh%3D%3B',
        '_meta_movableInk_mi_u': '5ac6a289-cabc-47aa-a1e8-1a6932fb1922',
        '_meta_amobee_uid_failure': 'failed to make request',
        '_meta_inMarket_userNdat_failure': 'failed to make request',
        '_meta_neustar_fabrickId_failure': 'failed to make request',
        '_meta_neustar_tuid_failure': 'failed to make request',
        'thda.m': '01742974330641885704821134802620270961',
        'LPVID': 'c0N2E0ZjlhMTQyOWU4NDNh',
        'LPSID-31564604': 'liyy4rUdQm2FJYuLNqzpFw',
        's_sq': '%5B%5BB%5D%5D',
        'AKA_A2': 'A',
        'ak_bmsc': '3639B2A1B65592A861D73933097B4A4A~000000000000000000000000000000~YAAQu1nIF4ZD+16NAQAA7Qc/ZxY/QPRVhp9S6iwXECOIZTNzNp/gvBTwXB6TKm39dNlBiNig3wbGvGGBCCVlAhKlXtubX8/HUeH4VSj5lXRdQdfsdrpQK5RN69Vt2tO2NWt5/rhZetYmOAgHAn3qXgtpKnp8ZsoV7rtIMJUa+yb3r8ap7ElZc+cKhywR0xGcTAcTM+4R5ozX1e44md8ElycAZDIw9EHNQ8q3lN9lECwuQWLhYC/jXunFc+8yLuY/1TqgRUvJSvbfk+PDqLMLYOFmFWbTUxA+XIl4DeGxGzV3f/9zbjmHp93TuJ2y3V5/xE7dZ1Ytpm1zXXUmWm8JmQyH2CHynCDpP0yYhLftrSWqM2gGTVOE3GTuRRj/Br0f6dkD7xdh1QRoSJ48PkS/R3bSbUU6/Ym5lYyjq744vhrJUPqdLBBSZqhcJOrXxy3KCv4m6CRH3jgHRL4Ph3tqWXe1jkl/82a3j113jg2P69U7i97oyDCgLlGwzw==',
        'bm_sz': '8B3A820D867779CA06070C9532F6F938~YAAQu1nIF+cj+16NAQAABAc9ZxYtuG6knyqUNmjozR5uoJlIA9SoFhOw6Wbd7bBSCJrXzuKx0BAMJ6XDOwKo2xEwVH1RYhPXZoeqzy4L3ebowNYB1+v15t4leuDVF+fLC8g2btRv9ljM7KuoXT57vTbrY4u9V/32YQ8OIb5p6pNjOOukZMozFMceDHakb1xR9NT3cbCWQ+VMIgmDnTgX1yCgDXtS5wH8EngVJWkBXKvaawROid4otinjrC2T0fljmPJ7Q32/LqayKelEK24Yn10eMkiPtMbBmG34a+aEg8ikOpy02EAH5LUCZhK7zy+yQXDCiP4Ez/r18kfNRqrZV0k5twAD+6qMaibogVdX0779pWc0+Xbi~4539718~3160117',
        'mbox': 'session#ac1411be9aca42cd80c1f07bd3a96620#1706837657',
        '_meta_metarouter_sessionID': '1706834073571',
        'bm_mi': 'B3BC0D220F685C91C95CE8BF9842F122~YAAQu1nIF6A++16NAQAAHcM+ZxY9i98EKIUk8Qi1FoRBbP/mVIsFxb+Dumf4x86yzUO9EQ/sbg6ELzq/Hdk4ba1LpOG3m6Zx4QkiSvBcq3gmX2ppn6e3c+piG5qLFDhR5qbDp7VRyWla5BG0GKtzJhSJOiN7s3Tu6+EMhm5XN+YwuamG/im03Z3SRa8JLZsKnvA0tvQVQplLBxK6q+jqp89E3hO4QN1NFniQIVGFTEmPNWvQnFm3RPRmjGatSls3bBtWqu5cELt66brjSyPKDcgU3Oc5KgZQMrl1I8DRyaMast3QChyRZdKhlMOlABDbbc93CDbe3Zx6CQB6x0lcOXV/rR8TPVFOjEgpzLyDDnHcev4bkgBTlN8ueaTPwSsdoaRS1MIyud+GQno=~1',
        'operation_id': '1817fa43-d556-4fb3-9aa3-a31860ea5de1',
        'mp_0e3ea14e7e90fc91592bf29cb9917ec6_mixpanel': '%7B%22distinct_id%22%3A%20%2218d673d3324bb9-0d8319d646173a-e575622-384000-18d673d332510b%22%2C%22%24device_id%22%3A%20%2218d673d3324bb9-0d8319d646173a-e575622-384000-18d673d332510b%22%2C%22%24initial_referrer%22%3A%20%22https%3A%2F%2Fwww.homedepot.com%2Fb%2FPlumbing-Water-Heaters%2FN-5yc1vZbqly%3FNCNI-5%26searchRedirect%3Dwater%2520heater%26semanticToken%3Dh27r10r00f22000000000_20240202003436061317114662_us-east4-d493%2520h27r10r00f22000000000%2520%253E%2520rid%253A%257B10586ffbb4d6c7e7e1e4a20af88b33f0%257D%253Arid%2520st%253A%257Bwater%2520heater%257D%253Ast%2520ml%253A%257B24%257D%253Aml%2520nr%253A%257Bwater%2520heater%257D%253Anr%2520nf%253A%257Bn%252Fa%257D%253Anf%2520qu%253A%257Bwater%2520heater%257D%253Aqu%2520ie%253A%257B0%257D%253Aie%2520qr%253A%257Bwater%2520heater%257D%253Aqr%22%2C%22%24initial_referring_domain%22%3A%20%22www.homedepot.com%22%7D',
        'mp_a8adb55e36402861d6245b9451afd02c_mixpanel': '%7B%22distinct_id%22%3A%20%2218d673d33315a7-026b2691c5b9c7-e575622-384000-18d673d333211b7%22%2C%22%24device_id%22%3A%20%2218d673d33315a7-026b2691c5b9c7-e575622-384000-18d673d333211b7%22%2C%22%24initial_referrer%22%3A%20%22https%3A%2F%2Fwww.homedepot.com%2Fb%2FPlumbing-Water-Heaters%2FN-5yc1vZbqly%3FNCNI-5%26searchRedirect%3Dwater%2520heater%26semanticToken%3Dh27r10r00f22000000000_20240202003436061317114662_us-east4-d493%2520h27r10r00f22000000000%2520%253E%2520rid%253A%257B10586ffbb4d6c7e7e1e4a20af88b33f0%257D%253Arid%2520st%253A%257Bwater%2520heater%257D%253Ast%2520ml%253A%257B24%257D%253Aml%2520nr%253A%257Bwater%2520heater%257D%253Anr%2520nf%253A%257Bn%252Fa%257D%253Anf%2520qu%253A%257Bwater%2520heater%257D%253Aqu%2520ie%253A%257B0%257D%253Aie%2520qr%253A%257Bwater%2520heater%257D%253Aqr%22%2C%22%24initial_referring_domain%22%3A%20%22www.homedepot.com%22%7D',
        'LOCALIZED_STORE_INFO': '{%22zipcode%22:%2211232%22%2C%22storeId%22:%221225%22%2C%22state%22:%22Brooklyn%22%2C%22name%22:%22Brooklyn%22%2C%22city%22:%22NY%22}',
        'salsify_session_id': 'f719422f-7aae-4a58-8526-f0fdfbabb786',
        'QSI_HistorySession': 'https%3A%2F%2Fwww.homedepot.com%2Fb%2FPlumbing-Water-Heaters%2FResidential%2FEnergy-Star%2FElectric%2FGas%2FN-5yc1vZbqlyZ1z109ppZ1z109sqZ1z109srZ1z1cmtuZ1z1wgir%3FNCNI-5%26Nao%3D24~1706835783591%7Chttps%3A%2F%2Fwww.homedepot.com%2Fb%2FPlumbing-Water-Heaters%2FResidential%2FEnergy-Star%2FElectric%2FGas%2FN-5yc1vZbqlyZ1z109ppZ1z109sqZ1z109srZ1z1cmtuZ1z1wgir%3FNCNI-5~1706835785099',
        'IN_STORE_API_SESSION': 'TRUE',
    }

    headers = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:122.0) Gecko/20100101 Firefox/122.0',
        'Accept': '*/*',
        'Accept-Language': 'en-US,en;q=0.5',
        # 'Accept-Encoding': 'gzip, deflate, br',
        'Referer': 'https://www.homedepot.com/b/Plumbing-Water-Heaters/Residential/Energy-Star/Electric/Gas/N-5yc1vZbqlyZ1z109ppZ1z109sqZ1z109srZ1z1cmtuZ1z1wgir?NCNI-5',
        'content-type': 'application/json',
        'x-experience-name': 'general-merchandise',
        'x-hd-dc': 'beta',
        'X-Api-Cookies': '{"x-user-id":"8389bad2-f7dc-59ae-dca6-ea8c9b8737b4"}',
        'x-debug': 'false',
        'X-Parent-Trace-Id': 'b4a0e315f658f2763e127ab097456e95/6327769794415479096',
        'X-Cloud-Trace-Context': '64eac6acfdd14e148d7a815adfb47258/0;o=1',
        'X-current-url': '/b/Plumbing-Water-Heaters/Residential/Energy-Star/Electric/Gas/N-5yc1vZbqlyZ1z109ppZ1z109sqZ1z109srZ1z1cmtuZ1z1wgir',
        'Origin': 'https://www.homedepot.com',
        'Connection': 'keep-alive',
        # 'Cookie': '_abck=18C96A4C12AB4CC3DA344CDECF1F3550~0~YAAQVVLbF34iOVSNAQAADVpXZwsk1Xk6T/iuPwbE+l4g2u19U1HZbiYln6Ejb1IsUVu60USMLrzIoDpymDMy8XhlR1NQuxv/CP9TDpGIOhNR9aiUhYhXeA00GIX8oMCBZHhieNq85X02JD1e9sUpqAy6tEaGVUZQTlafKM4hQcSTHCiQ4PhFYW4e2ezhgj1fgRRzMHsinh36U/9RGFvqApZJAyLjdiRpOPicRdE8kKlAXazZF+p6eZbS4/9YdMixuSXcVivnkm1dmqPbdF4319i/hBNaLP4fXP5z2JnQb6NIU72+xh73+u+Ri6JaSchJI+1zPlj1WyTegrNyQpVrJB+YdIFuSWQSa9zDCVvpqN2z+/QfdLIh5WnIUVmadsaPT7aKNhj/uvAqX5gbJ/+XAKo/i8ZKSF/e9x1OMg==~-1~-1~-1; THD_PERSIST=; THD_CACHE_NAV_PERSIST=; DELIVERY_ZIP=11232; DELIVERY_ZIP_TYPE=DEFAULT; _px_f394gi7Fvmc43dfg_user_id=ODQ1MzZkZTEtYmUwOC0xMWVlLWI2YTYtODkyM2VkYTQyYTg0; AMCV_F6421253512D2C100A490D45%40AdobeOrg=1585540135%7CMCMID%7C01742974330641885704821134802620270961%7CMCOPTOUT-1706842994s%7CNONE%7CvVersion%7C4.4.0; thda.u=8389bad2-f7dc-59ae-dca6-ea8c9b8737b4; forterToken=4849a93371444cbca0f8c3688c3d2704_1706835689264_78_UDF9_13ck; s_pers=%20s_nr365%3D1706835782136-Repeat%7C1738371782136%3B; ajs_anonymous_id=5ac6a289-cabc-47aa-a1e8-1a6932fb1922; _meta_neustar_mcvisid=01742974330641885704821134802620270961; _meta_neustar_aam=; _meta_metarouter_timezone_offset=300; _meta_adobe_fire={"xandr":false,"revjet":false}; HD_DC=beta; akavpau_prod=1706836096~id=75c0cdfd123905a51235b2a138c61ec0; akacd_usbeta=3884268831~rv=10~id=94c0e54f1b89b62a6503e71c71f3e826; THD_NR=0; at_check=true; THD_SESSION=; THD_CACHE_NAV_SESSION=; THD_LOCALIZER=%7B%22WORKFLOW%22%3A%22LOC_HISTORY_BY_IP%22%2C%22THD_FORCE_LOC%22%3A%221%22%2C%22THD_INTERNAL%22%3A%220%22%2C%22THD_LOCSTORE%22%3A%221225%2BBrooklyn%2C%20NY%20-%20Brooklyn%2C%20NY%2B%22%2C%22THD_STRFINDERZIP%22%3A%2211232%22%2C%22THD_STORE_HOURS%22%3A%221%3B8%3A00-20%3A00%3B2%3B6%3A00-22%3A00%3B3%3B6%3A00-22%3A00%3B4%3B6%3A00-22%3A00%3B5%3B6%3A00-22%3A00%3B6%3B6%3A00-22%3A00%3B7%3B6%3A00-22%3A00%22%2C%22THD_STORE_HOURS_EXPIRY%22%3A1706837670%7D; AMCVS_F6421253512D2C100A490D45%40AdobeOrg=1; thda.s=50369ed8-7c7c-5bd2-a7e7-0d1967ef23a9; ecrSessionId=76EFE0D1B112F7DC85D748E4701B969C; s_sess=%20s_cc%3Dtrue%3B%20s_pv_pName%3Dplumbing%253Ewater%2520heaters%253Epagination%3B%20s_pv_pType%3Dplp%3B%20s_pv_cmpgn%3D%3B%20s_pv_pVer%3Dplp%253Aversion%253Agen2%3B%20stsh%3D%3B; _meta_movableInk_mi_u=5ac6a289-cabc-47aa-a1e8-1a6932fb1922; _meta_amobee_uid_failure=failed to make request; _meta_inMarket_userNdat_failure=failed to make request; _meta_neustar_fabrickId_failure=failed to make request; _meta_neustar_tuid_failure=failed to make request; thda.m=01742974330641885704821134802620270961; LPVID=c0N2E0ZjlhMTQyOWU4NDNh; LPSID-31564604=liyy4rUdQm2FJYuLNqzpFw; s_sq=%5B%5BB%5D%5D; AKA_A2=A; ak_bmsc=3639B2A1B65592A861D73933097B4A4A~000000000000000000000000000000~YAAQu1nIF4ZD+16NAQAA7Qc/ZxY/QPRVhp9S6iwXECOIZTNzNp/gvBTwXB6TKm39dNlBiNig3wbGvGGBCCVlAhKlXtubX8/HUeH4VSj5lXRdQdfsdrpQK5RN69Vt2tO2NWt5/rhZetYmOAgHAn3qXgtpKnp8ZsoV7rtIMJUa+yb3r8ap7ElZc+cKhywR0xGcTAcTM+4R5ozX1e44md8ElycAZDIw9EHNQ8q3lN9lECwuQWLhYC/jXunFc+8yLuY/1TqgRUvJSvbfk+PDqLMLYOFmFWbTUxA+XIl4DeGxGzV3f/9zbjmHp93TuJ2y3V5/xE7dZ1Ytpm1zXXUmWm8JmQyH2CHynCDpP0yYhLftrSWqM2gGTVOE3GTuRRj/Br0f6dkD7xdh1QRoSJ48PkS/R3bSbUU6/Ym5lYyjq744vhrJUPqdLBBSZqhcJOrXxy3KCv4m6CRH3jgHRL4Ph3tqWXe1jkl/82a3j113jg2P69U7i97oyDCgLlGwzw==; bm_sz=8B3A820D867779CA06070C9532F6F938~YAAQu1nIF+cj+16NAQAABAc9ZxYtuG6knyqUNmjozR5uoJlIA9SoFhOw6Wbd7bBSCJrXzuKx0BAMJ6XDOwKo2xEwVH1RYhPXZoeqzy4L3ebowNYB1+v15t4leuDVF+fLC8g2btRv9ljM7KuoXT57vTbrY4u9V/32YQ8OIb5p6pNjOOukZMozFMceDHakb1xR9NT3cbCWQ+VMIgmDnTgX1yCgDXtS5wH8EngVJWkBXKvaawROid4otinjrC2T0fljmPJ7Q32/LqayKelEK24Yn10eMkiPtMbBmG34a+aEg8ikOpy02EAH5LUCZhK7zy+yQXDCiP4Ez/r18kfNRqrZV0k5twAD+6qMaibogVdX0779pWc0+Xbi~4539718~3160117; mbox=session#ac1411be9aca42cd80c1f07bd3a96620#1706837657; _meta_metarouter_sessionID=1706834073571; bm_mi=B3BC0D220F685C91C95CE8BF9842F122~YAAQu1nIF6A++16NAQAAHcM+ZxY9i98EKIUk8Qi1FoRBbP/mVIsFxb+Dumf4x86yzUO9EQ/sbg6ELzq/Hdk4ba1LpOG3m6Zx4QkiSvBcq3gmX2ppn6e3c+piG5qLFDhR5qbDp7VRyWla5BG0GKtzJhSJOiN7s3Tu6+EMhm5XN+YwuamG/im03Z3SRa8JLZsKnvA0tvQVQplLBxK6q+jqp89E3hO4QN1NFniQIVGFTEmPNWvQnFm3RPRmjGatSls3bBtWqu5cELt66brjSyPKDcgU3Oc5KgZQMrl1I8DRyaMast3QChyRZdKhlMOlABDbbc93CDbe3Zx6CQB6x0lcOXV/rR8TPVFOjEgpzLyDDnHcev4bkgBTlN8ueaTPwSsdoaRS1MIyud+GQno=~1; operation_id=1817fa43-d556-4fb3-9aa3-a31860ea5de1; mp_0e3ea14e7e90fc91592bf29cb9917ec6_mixpanel=%7B%22distinct_id%22%3A%20%2218d673d3324bb9-0d8319d646173a-e575622-384000-18d673d332510b%22%2C%22%24device_id%22%3A%20%2218d673d3324bb9-0d8319d646173a-e575622-384000-18d673d332510b%22%2C%22%24initial_referrer%22%3A%20%22https%3A%2F%2Fwww.homedepot.com%2Fb%2FPlumbing-Water-Heaters%2FN-5yc1vZbqly%3FNCNI-5%26searchRedirect%3Dwater%2520heater%26semanticToken%3Dh27r10r00f22000000000_20240202003436061317114662_us-east4-d493%2520h27r10r00f22000000000%2520%253E%2520rid%253A%257B10586ffbb4d6c7e7e1e4a20af88b33f0%257D%253Arid%2520st%253A%257Bwater%2520heater%257D%253Ast%2520ml%253A%257B24%257D%253Aml%2520nr%253A%257Bwater%2520heater%257D%253Anr%2520nf%253A%257Bn%252Fa%257D%253Anf%2520qu%253A%257Bwater%2520heater%257D%253Aqu%2520ie%253A%257B0%257D%253Aie%2520qr%253A%257Bwater%2520heater%257D%253Aqr%22%2C%22%24initial_referring_domain%22%3A%20%22www.homedepot.com%22%7D; mp_a8adb55e36402861d6245b9451afd02c_mixpanel=%7B%22distinct_id%22%3A%20%2218d673d33315a7-026b2691c5b9c7-e575622-384000-18d673d333211b7%22%2C%22%24device_id%22%3A%20%2218d673d33315a7-026b2691c5b9c7-e575622-384000-18d673d333211b7%22%2C%22%24initial_referrer%22%3A%20%22https%3A%2F%2Fwww.homedepot.com%2Fb%2FPlumbing-Water-Heaters%2FN-5yc1vZbqly%3FNCNI-5%26searchRedirect%3Dwater%2520heater%26semanticToken%3Dh27r10r00f22000000000_20240202003436061317114662_us-east4-d493%2520h27r10r00f22000000000%2520%253E%2520rid%253A%257B10586ffbb4d6c7e7e1e4a20af88b33f0%257D%253Arid%2520st%253A%257Bwater%2520heater%257D%253Ast%2520ml%253A%257B24%257D%253Aml%2520nr%253A%257Bwater%2520heater%257D%253Anr%2520nf%253A%257Bn%252Fa%257D%253Anf%2520qu%253A%257Bwater%2520heater%257D%253Aqu%2520ie%253A%257B0%257D%253Aie%2520qr%253A%257Bwater%2520heater%257D%253Aqr%22%2C%22%24initial_referring_domain%22%3A%20%22www.homedepot.com%22%7D; LOCALIZED_STORE_INFO={%22zipcode%22:%2211232%22%2C%22storeId%22:%221225%22%2C%22state%22:%22Brooklyn%22%2C%22name%22:%22Brooklyn%22%2C%22city%22:%22NY%22}; salsify_session_id=f719422f-7aae-4a58-8526-f0fdfbabb786; QSI_HistorySession=https%3A%2F%2Fwww.homedepot.com%2Fb%2FPlumbing-Water-Heaters%2FResidential%2FEnergy-Star%2FElectric%2FGas%2FN-5yc1vZbqlyZ1z109ppZ1z109sqZ1z109srZ1z1cmtuZ1z1wgir%3FNCNI-5%26Nao%3D24~1706835783591%7Chttps%3A%2F%2Fwww.homedepot.com%2Fb%2FPlumbing-Water-Heaters%2FResidential%2FEnergy-Star%2FElectric%2FGas%2FN-5yc1vZbqlyZ1z109ppZ1z109sqZ1z109srZ1z1cmtuZ1z1wgir%3FNCNI-5~1706835785099; IN_STORE_API_SESSION=TRUE',
        'Sec-Fetch-Dest': 'empty',
        'Sec-Fetch-Mode': 'cors',
        'Sec-Fetch-Site': 'same-origin',
        'Sec-GPC': '1',
        # Requests doesn't support trailers
        # 'TE': 'trailers',
    }

    params = {
        'opname': 'searchModel',
    }

    if offset:
        params['Nao']=offset

    json_data = {
        'operationName': 'searchModel',
        'variables': {
            'skipInstallServices': False,
            'skipFavoriteCount': False,
            'skipKPF': False,
            'skipSpecificationGroup': False,
            'skipSubscribeAndSave': False,
            'storefilter': 'ALL',
            'channel': 'DESKTOP',
            'skipDiscoveryZones': False,
            'additionalSearchParams': {
                'sponsored': True,
                'mcvisId': '01742974330641885704821134802620270961',
                'deliveryZip': '11232',
                'multiStoreIds': [],
            },
            'filter': {},
            'navParam': '5yc1vZbqlyZ1z109ppZ1z109sqZ1z109srZ1z1cmtuZ1z1wgir',
            'orderBy': {
                'field': 'TOP_SELLERS',
                'order': 'ASC',
            },
            'pageSize': 24,
            'startIndex': 0,
            'storeId': '1225',
        },
        'query': 'query searchModel($storeId: String, $zipCode: String, $skipInstallServices: Boolean = true, $startIndex: Int, $pageSize: Int, $orderBy: ProductSort, $filter: ProductFilter, $skipFavoriteCount: Boolean = false, $skipKPF: Boolean = false, $skipSpecificationGroup: Boolean = false, $skipSubscribeAndSave: Boolean = false, $keyword: String, $navParam: String, $storefilter: StoreFilter = ALL, $itemIds: [String], $channel: Channel = DESKTOP, $additionalSearchParams: AdditionalParams, $loyaltyMembershipInput: LoyaltyMembershipInput, $dataSource: String, $skipDiscoveryZones: Boolean = true) {\n  searchModel(\n    keyword: $keyword\n    navParam: $navParam\n    storefilter: $storefilter\n    storeId: $storeId\n    itemIds: $itemIds\n    channel: $channel\n    additionalSearchParams: $additionalSearchParams\n    loyaltyMembershipInput: $loyaltyMembershipInput\n  ) {\n    metadata {\n      hasPLPBanner\n      categoryID\n      analytics {\n        semanticTokens\n        dynamicLCA\n        __typename\n      }\n      canonicalUrl\n      searchRedirect\n      clearAllRefinementsURL\n      contentType\n      h1Tag\n      isStoreDisplay\n      productCount {\n        inStore\n        __typename\n      }\n      stores {\n        storeId\n        storeName\n        address {\n          postalCode\n          __typename\n        }\n        nearByStores {\n          storeId\n          storeName\n          distance\n          address {\n            postalCode\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    products(\n      startIndex: $startIndex\n      pageSize: $pageSize\n      orderBy: $orderBy\n      filter: $filter\n    ) {\n      identifiers {\n        storeSkuNumber\n        specialOrderSku\n        canonicalUrl\n        brandName\n        itemId\n        productLabel\n        productType\n        modelNumber\n        parentId\n        isSuperSku\n        sampleId\n        __typename\n      }\n      installServices(storeId: $storeId, zipCode: $zipCode) @skip(if: $skipInstallServices) {\n        scheduleAMeasure\n        gccCarpetDesignAndOrderEligible\n        __typename\n      }\n      info {\n        sponsoredMetadata {\n          sponsoredId\n          trackSource\n          campaignId\n          placementId\n          slotId\n          __typename\n        }\n        sponsoredBeacon {\n          onClickBeacons\n          onViewBeacons\n          onClickBeacon\n          onViewBeacon\n          __typename\n        }\n        swatches {\n          isSelected\n          itemId\n          label\n          swatchImgUrl\n          url\n          value\n          __typename\n        }\n        hidePrice\n        ecoRebate\n        quantityLimit\n        categoryHierarchy\n        sskMin\n        sskMax\n        unitOfMeasureCoverage\n        wasMaxPriceRange\n        wasMinPriceRange\n        productSubType {\n          name\n          link\n          __typename\n        }\n        customerSignal {\n          previouslyPurchased\n          __typename\n        }\n        isBuryProduct\n        isGenericProduct\n        returnable\n        isLiveGoodsProduct\n        isSponsored\n        globalCustomConfigurator {\n          customExperience\n          __typename\n        }\n        augmentedReality\n        hasSubscription\n        samplesAvailable\n        totalNumberOfOptions\n        classNumber\n        productDepartment\n        __typename\n      }\n      itemId\n      dataSources\n      media {\n        images {\n          url\n          type\n          subType\n          sizes\n          __typename\n        }\n        __typename\n      }\n      pricing(storeId: $storeId) {\n        value\n        alternatePriceDisplay\n        alternate {\n          bulk {\n            pricePerUnit\n            thresholdQuantity\n            value\n            __typename\n          }\n          unit {\n            caseUnitOfMeasure\n            unitsOriginalPrice\n            unitsPerCase\n            value\n            __typename\n          }\n          __typename\n        }\n        original\n        mapAboveOriginalPrice\n        message\n        preferredPriceFlag\n        promotion {\n          type\n          description {\n            shortDesc\n            longDesc\n            __typename\n          }\n          dollarOff\n          percentageOff\n          promotionTag\n          savingsCenter\n          savingsCenterPromos\n          specialBuySavings\n          specialBuyDollarOff\n          specialBuyPercentageOff\n          dates {\n            start\n            end\n            __typename\n          }\n          __typename\n        }\n        specialBuy\n        unitOfMeasure\n        __typename\n      }\n      reviews {\n        ratingsReviews {\n          averageRating\n          totalReviews\n          __typename\n        }\n        __typename\n      }\n      details {\n        installation {\n          serviceType\n          __typename\n        }\n        collection {\n          name\n          url\n          collectionId\n          __typename\n        }\n        highlights\n        __typename\n      }\n      fulfillment(storeId: $storeId, zipCode: $zipCode) {\n        anchorStoreStatus\n        anchorStoreStatusType\n        backordered\n        backorderedShipDate\n        bossExcludedShipStates\n        excludedShipStates\n        seasonStatusEligible\n        fulfillmentOptions {\n          type\n          fulfillable\n          services {\n            deliveryTimeline\n            deliveryDates {\n              startDate\n              endDate\n              __typename\n            }\n            deliveryCharge\n            dynamicEta {\n              hours\n              minutes\n              __typename\n            }\n            hasFreeShipping\n            freeDeliveryThreshold\n            locations {\n              curbsidePickupFlag\n              isBuyInStoreCheckNearBy\n              distance\n              inventory {\n                isOutOfStock\n                isInStock\n                isLimitedQuantity\n                isUnavailable\n                quantity\n                maxAllowedBopisQty\n                minAllowedBopisQty\n                __typename\n              }\n              isAnchor\n              locationId\n              state\n              storeName\n              storePhone\n              type\n              __typename\n            }\n            type\n            totalCharge\n            __typename\n          }\n          __typename\n        }\n        onlineStoreStatus\n        onlineStoreStatusType\n        __typename\n      }\n      availabilityType {\n        type\n        discontinued\n        buyable\n        status\n        __typename\n      }\n      badges(storeId: $storeId) {\n        name\n        label\n        __typename\n      }\n      dataSource\n      favoriteDetail @skip(if: $skipFavoriteCount) {\n        count\n        __typename\n      }\n      keyProductFeatures @skip(if: $skipKPF) {\n        keyProductFeaturesItems {\n          features {\n            name\n            refinementId\n            refinementUrl\n            value\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      specificationGroup @skip(if: $skipSpecificationGroup) {\n        specifications {\n          specName\n          specValue\n          __typename\n        }\n        specTitle\n        __typename\n      }\n      subscription @skip(if: $skipSubscribeAndSave) {\n        defaultfrequency\n        discountPercentage\n        subscriptionEnabled\n        __typename\n      }\n      __typename\n    }\n    id\n    searchReport {\n      totalProducts\n      didYouMean\n      correctedKeyword\n      keyword\n      pageSize\n      searchUrl\n      sortBy\n      sortOrder\n      startIndex\n      __typename\n    }\n    relatedResults {\n      universalSearch {\n        title\n        __typename\n      }\n      relatedServices {\n        label\n        __typename\n      }\n      visualNavs {\n        label\n        imageId\n        webUrl\n        categoryId\n        imageURL\n        __typename\n      }\n      visualNavContainsEvents\n      relatedKeywords {\n        keyword\n        __typename\n      }\n      __typename\n    }\n    taxonomy {\n      brandLinkUrl\n      breadCrumbs {\n        browseUrl\n        creativeIconUrl\n        deselectUrl\n        dimensionId\n        dimensionName\n        label\n        refinementKey\n        url\n        __typename\n      }\n      __typename\n    }\n    templates\n    discoveryZones @skip(if: $skipDiscoveryZones) {\n      products(dataSource: $dataSource) {\n        itemId\n        dataSources\n        badges(storeId: $storeId) {\n          name\n          __typename\n        }\n        info {\n          isSponsored\n          sponsoredMetadata {\n            campaignId\n            placementId\n            slotId\n            sponsoredId\n            trackSource\n            __typename\n          }\n          sponsoredBeacon {\n            onClickBeacon\n            onViewBeacon\n            onClickBeacons\n            onViewBeacons\n            __typename\n          }\n          productSubType {\n            name\n            __typename\n          }\n          augmentedReality\n          globalCustomConfigurator {\n            customExperience\n            __typename\n          }\n          swatches {\n            isSelected\n            itemId\n            label\n            swatchImgUrl\n            url\n            value\n            __typename\n          }\n          totalNumberOfOptions\n          hidePrice\n          ecoRebate\n          quantityLimit\n          categoryHierarchy\n          sskMin\n          sskMax\n          unitOfMeasureCoverage\n          wasMaxPriceRange\n          wasMinPriceRange\n          __typename\n        }\n        identifiers {\n          canonicalUrl\n          productType\n          productLabel\n          modelNumber\n          storeSkuNumber\n          itemId\n          brandName\n          parentId\n          __typename\n        }\n        media {\n          images {\n            url\n            type\n            subType\n            sizes\n            __typename\n          }\n          __typename\n        }\n        dataSource\n        details {\n          collection {\n            name\n            url\n            __typename\n          }\n          __typename\n        }\n        pricing(storeId: $storeId) {\n          alternatePriceDisplay\n          alternate {\n            bulk {\n              pricePerUnit\n              thresholdQuantity\n              value\n              __typename\n            }\n            unit {\n              caseUnitOfMeasure\n              unitsOriginalPrice\n              unitsPerCase\n              value\n              __typename\n            }\n            __typename\n          }\n          original\n          mapAboveOriginalPrice\n          message\n          preferredPriceFlag\n          promotion {\n            type\n            description {\n              shortDesc\n              longDesc\n              __typename\n            }\n            dollarOff\n            percentageOff\n            promotionTag\n            savingsCenter\n            savingsCenterPromos\n            specialBuySavings\n            specialBuyDollarOff\n            specialBuyPercentageOff\n            __typename\n          }\n          specialBuy\n          unitOfMeasure\n          value\n          __typename\n        }\n        __typename\n      }\n      metadata {\n        zone\n        zoneTitle\n        __typename\n      }\n      __typename\n    }\n    partialTemplates\n    dimensions {\n      label\n      refinements {\n        refinementKey\n        label\n        recordCount\n        selected\n        imgUrl\n        url\n        nestedRefinements {\n          label\n          url\n          recordCount\n          refinementKey\n          __typename\n        }\n        __typename\n      }\n      collapse\n      dimensionId\n      isVisualNav\n      isVisualDimension\n      isNumericFilter\n      isColorSwatch\n      nestedRefinementsLimit\n      visualNavSequence\n      __typename\n    }\n    orangeGraph {\n      universalSearchArray {\n        pods {\n          title\n          description\n          imageUrl\n          link\n          isProContent\n          recordType\n          __typename\n        }\n        info {\n          title\n          __typename\n        }\n        __typename\n      }\n      productTypes\n      intents\n      orderNumber\n      __typename\n    }\n    appliedDimensions {\n      label\n      refinements {\n        label\n        refinementKey\n        url\n        __typename\n      }\n      isNumericFilter\n      __typename\n    }\n    primaryFilters {\n      collapse\n      dimensionId\n      isVisualNav\n      isVisualDimension\n      isNumericFilter\n      isColorSwatch\n      label\n      nestedRefinementsLimit\n      refinements {\n        label\n        refinementKey\n        recordCount\n        selected\n        imgUrl\n        url\n        nestedRefinements {\n          label\n          url\n          recordCount\n          refinementKey\n          __typename\n        }\n        __typename\n      }\n      visualNavSequence\n      __typename\n    }\n    __typename\n  }\n}',
    }

    response = requests.post(
        'https://www.homedepot.com/federation-gateway/graphql',
        params=params,
        cookies=cookies,
        headers=headers,
        json=json_data,
    )

    # Note: json_data will not be serialized by requests
    # exactly as it was in the original request.
    #data = '{"operationName":"searchModel","variables":{"skipInstallServices":false,"skipFavoriteCount":false,"skipKPF":false,"skipSpecificationGroup":false,"skipSubscribeAndSave":false,"storefilter":"ALL","channel":"DESKTOP","skipDiscoveryZones":false,"additionalSearchParams":{"sponsored":true,"mcvisId":"01742974330641885704821134802620270961","deliveryZip":"11232","multiStoreIds":[]},"filter":{},"navParam":"5yc1vZbqlyZ1z109ppZ1z109sqZ1z109srZ1z1cmtuZ1z1wgir","orderBy":{"field":"TOP_SELLERS","order":"ASC"},"pageSize":24,"startIndex":0,"storeId":"1225"},"query":"query searchModel($storeId: String, $zipCode: String, $skipInstallServices: Boolean = true, $startIndex: Int, $pageSize: Int, $orderBy: ProductSort, $filter: ProductFilter, $skipFavoriteCount: Boolean = false, $skipKPF: Boolean = false, $skipSpecificationGroup: Boolean = false, $skipSubscribeAndSave: Boolean = false, $keyword: String, $navParam: String, $storefilter: StoreFilter = ALL, $itemIds: [String], $channel: Channel = DESKTOP, $additionalSearchParams: AdditionalParams, $loyaltyMembershipInput: LoyaltyMembershipInput, $dataSource: String, $skipDiscoveryZones: Boolean = true) {\\n  searchModel(\\n    keyword: $keyword\\n    navParam: $navParam\\n    storefilter: $storefilter\\n    storeId: $storeId\\n    itemIds: $itemIds\\n    channel: $channel\\n    additionalSearchParams: $additionalSearchParams\\n    loyaltyMembershipInput: $loyaltyMembershipInput\\n  ) {\\n    metadata {\\n      hasPLPBanner\\n      categoryID\\n      analytics {\\n        semanticTokens\\n        dynamicLCA\\n        __typename\\n      }\\n      canonicalUrl\\n      searchRedirect\\n      clearAllRefinementsURL\\n      contentType\\n      h1Tag\\n      isStoreDisplay\\n      productCount {\\n        inStore\\n        __typename\\n      }\\n      stores {\\n        storeId\\n        storeName\\n        address {\\n          postalCode\\n          __typename\\n        }\\n        nearByStores {\\n          storeId\\n          storeName\\n          distance\\n          address {\\n            postalCode\\n            __typename\\n          }\\n          __typename\\n        }\\n        __typename\\n      }\\n      __typename\\n    }\\n    products(\\n      startIndex: $startIndex\\n      pageSize: $pageSize\\n      orderBy: $orderBy\\n      filter: $filter\\n    ) {\\n      identifiers {\\n        storeSkuNumber\\n        specialOrderSku\\n        canonicalUrl\\n        brandName\\n        itemId\\n        productLabel\\n        productType\\n        modelNumber\\n        parentId\\n        isSuperSku\\n        sampleId\\n        __typename\\n      }\\n      installServices(storeId: $storeId, zipCode: $zipCode) @skip(if: $skipInstallServices) {\\n        scheduleAMeasure\\n        gccCarpetDesignAndOrderEligible\\n        __typename\\n      }\\n      info {\\n        sponsoredMetadata {\\n          sponsoredId\\n          trackSource\\n          campaignId\\n          placementId\\n          slotId\\n          __typename\\n        }\\n        sponsoredBeacon {\\n          onClickBeacons\\n          onViewBeacons\\n          onClickBeacon\\n          onViewBeacon\\n          __typename\\n        }\\n        swatches {\\n          isSelected\\n          itemId\\n          label\\n          swatchImgUrl\\n          url\\n          value\\n          __typename\\n        }\\n        hidePrice\\n        ecoRebate\\n        quantityLimit\\n        categoryHierarchy\\n        sskMin\\n        sskMax\\n        unitOfMeasureCoverage\\n        wasMaxPriceRange\\n        wasMinPriceRange\\n        productSubType {\\n          name\\n          link\\n          __typename\\n        }\\n        customerSignal {\\n          previouslyPurchased\\n          __typename\\n        }\\n        isBuryProduct\\n        isGenericProduct\\n        returnable\\n        isLiveGoodsProduct\\n        isSponsored\\n        globalCustomConfigurator {\\n          customExperience\\n          __typename\\n        }\\n        augmentedReality\\n        hasSubscription\\n        samplesAvailable\\n        totalNumberOfOptions\\n        classNumber\\n        productDepartment\\n        __typename\\n      }\\n      itemId\\n      dataSources\\n      media {\\n        images {\\n          url\\n          type\\n          subType\\n          sizes\\n          __typename\\n        }\\n        __typename\\n      }\\n      pricing(storeId: $storeId) {\\n        value\\n        alternatePriceDisplay\\n        alternate {\\n          bulk {\\n            pricePerUnit\\n            thresholdQuantity\\n            value\\n            __typename\\n          }\\n          unit {\\n            caseUnitOfMeasure\\n            unitsOriginalPrice\\n            unitsPerCase\\n            value\\n            __typename\\n          }\\n          __typename\\n        }\\n        original\\n        mapAboveOriginalPrice\\n        message\\n        preferredPriceFlag\\n        promotion {\\n          type\\n          description {\\n            shortDesc\\n            longDesc\\n            __typename\\n          }\\n          dollarOff\\n          percentageOff\\n          promotionTag\\n          savingsCenter\\n          savingsCenterPromos\\n          specialBuySavings\\n          specialBuyDollarOff\\n          specialBuyPercentageOff\\n          dates {\\n            start\\n            end\\n            __typename\\n          }\\n          __typename\\n        }\\n        specialBuy\\n        unitOfMeasure\\n        __typename\\n      }\\n      reviews {\\n        ratingsReviews {\\n          averageRating\\n          totalReviews\\n          __typename\\n        }\\n        __typename\\n      }\\n      details {\\n        installation {\\n          serviceType\\n          __typename\\n        }\\n        collection {\\n          name\\n          url\\n          collectionId\\n          __typename\\n        }\\n        highlights\\n        __typename\\n      }\\n      fulfillment(storeId: $storeId, zipCode: $zipCode) {\\n        anchorStoreStatus\\n        anchorStoreStatusType\\n        backordered\\n        backorderedShipDate\\n        bossExcludedShipStates\\n        excludedShipStates\\n        seasonStatusEligible\\n        fulfillmentOptions {\\n          type\\n          fulfillable\\n          services {\\n            deliveryTimeline\\n            deliveryDates {\\n              startDate\\n              endDate\\n              __typename\\n            }\\n            deliveryCharge\\n            dynamicEta {\\n              hours\\n              minutes\\n              __typename\\n            }\\n            hasFreeShipping\\n            freeDeliveryThreshold\\n            locations {\\n              curbsidePickupFlag\\n              isBuyInStoreCheckNearBy\\n              distance\\n              inventory {\\n                isOutOfStock\\n                isInStock\\n                isLimitedQuantity\\n                isUnavailable\\n                quantity\\n                maxAllowedBopisQty\\n                minAllowedBopisQty\\n                __typename\\n              }\\n              isAnchor\\n              locationId\\n              state\\n              storeName\\n              storePhone\\n              type\\n              __typename\\n            }\\n            type\\n            totalCharge\\n            __typename\\n          }\\n          __typename\\n        }\\n        onlineStoreStatus\\n        onlineStoreStatusType\\n        __typename\\n      }\\n      availabilityType {\\n        type\\n        discontinued\\n        buyable\\n        status\\n        __typename\\n      }\\n      badges(storeId: $storeId) {\\n        name\\n        label\\n        __typename\\n      }\\n      dataSource\\n      favoriteDetail @skip(if: $skipFavoriteCount) {\\n        count\\n        __typename\\n      }\\n      keyProductFeatures @skip(if: $skipKPF) {\\n        keyProductFeaturesItems {\\n          features {\\n            name\\n            refinementId\\n            refinementUrl\\n            value\\n            __typename\\n          }\\n          __typename\\n        }\\n        __typename\\n      }\\n      specificationGroup @skip(if: $skipSpecificationGroup) {\\n        specifications {\\n          specName\\n          specValue\\n          __typename\\n        }\\n        specTitle\\n        __typename\\n      }\\n      subscription @skip(if: $skipSubscribeAndSave) {\\n        defaultfrequency\\n        discountPercentage\\n        subscriptionEnabled\\n        __typename\\n      }\\n      __typename\\n    }\\n    id\\n    searchReport {\\n      totalProducts\\n      didYouMean\\n      correctedKeyword\\n      keyword\\n      pageSize\\n      searchUrl\\n      sortBy\\n      sortOrder\\n      startIndex\\n      __typename\\n    }\\n    relatedResults {\\n      universalSearch {\\n        title\\n        __typename\\n      }\\n      relatedServices {\\n        label\\n        __typename\\n      }\\n      visualNavs {\\n        label\\n        imageId\\n        webUrl\\n        categoryId\\n        imageURL\\n        __typename\\n      }\\n      visualNavContainsEvents\\n      relatedKeywords {\\n        keyword\\n        __typename\\n      }\\n      __typename\\n    }\\n    taxonomy {\\n      brandLinkUrl\\n      breadCrumbs {\\n        browseUrl\\n        creativeIconUrl\\n        deselectUrl\\n        dimensionId\\n        dimensionName\\n        label\\n        refinementKey\\n        url\\n        __typename\\n      }\\n      __typename\\n    }\\n    templates\\n    discoveryZones @skip(if: $skipDiscoveryZones) {\\n      products(dataSource: $dataSource) {\\n        itemId\\n        dataSources\\n        badges(storeId: $storeId) {\\n          name\\n          __typename\\n        }\\n        info {\\n          isSponsored\\n          sponsoredMetadata {\\n            campaignId\\n            placementId\\n            slotId\\n            sponsoredId\\n            trackSource\\n            __typename\\n          }\\n          sponsoredBeacon {\\n            onClickBeacon\\n            onViewBeacon\\n            onClickBeacons\\n            onViewBeacons\\n            __typename\\n          }\\n          productSubType {\\n            name\\n            __typename\\n          }\\n          augmentedReality\\n          globalCustomConfigurator {\\n            customExperience\\n            __typename\\n          }\\n          swatches {\\n            isSelected\\n            itemId\\n            label\\n            swatchImgUrl\\n            url\\n            value\\n            __typename\\n          }\\n          totalNumberOfOptions\\n          hidePrice\\n          ecoRebate\\n          quantityLimit\\n          categoryHierarchy\\n          sskMin\\n          sskMax\\n          unitOfMeasureCoverage\\n          wasMaxPriceRange\\n          wasMinPriceRange\\n          __typename\\n        }\\n        identifiers {\\n          canonicalUrl\\n          productType\\n          productLabel\\n          modelNumber\\n          storeSkuNumber\\n          itemId\\n          brandName\\n          parentId\\n          __typename\\n        }\\n        media {\\n          images {\\n            url\\n            type\\n            subType\\n            sizes\\n            __typename\\n          }\\n          __typename\\n        }\\n        dataSource\\n        details {\\n          collection {\\n            name\\n            url\\n            __typename\\n          }\\n          __typename\\n        }\\n        pricing(storeId: $storeId) {\\n          alternatePriceDisplay\\n          alternate {\\n            bulk {\\n              pricePerUnit\\n              thresholdQuantity\\n              value\\n              __typename\\n            }\\n            unit {\\n              caseUnitOfMeasure\\n              unitsOriginalPrice\\n              unitsPerCase\\n              value\\n              __typename\\n            }\\n            __typename\\n          }\\n          original\\n          mapAboveOriginalPrice\\n          message\\n          preferredPriceFlag\\n          promotion {\\n            type\\n            description {\\n              shortDesc\\n              longDesc\\n              __typename\\n            }\\n            dollarOff\\n            percentageOff\\n            promotionTag\\n            savingsCenter\\n            savingsCenterPromos\\n            specialBuySavings\\n            specialBuyDollarOff\\n            specialBuyPercentageOff\\n            __typename\\n          }\\n          specialBuy\\n          unitOfMeasure\\n          value\\n          __typename\\n        }\\n        __typename\\n      }\\n      metadata {\\n        zone\\n        zoneTitle\\n        __typename\\n      }\\n      __typename\\n    }\\n    partialTemplates\\n    dimensions {\\n      label\\n      refinements {\\n        refinementKey\\n        label\\n        recordCount\\n        selected\\n        imgUrl\\n        url\\n        nestedRefinements {\\n          label\\n          url\\n          recordCount\\n          refinementKey\\n          __typename\\n        }\\n        __typename\\n      }\\n      collapse\\n      dimensionId\\n      isVisualNav\\n      isVisualDimension\\n      isNumericFilter\\n      isColorSwatch\\n      nestedRefinementsLimit\\n      visualNavSequence\\n      __typename\\n    }\\n    orangeGraph {\\n      universalSearchArray {\\n        pods {\\n          title\\n          description\\n          imageUrl\\n          link\\n          isProContent\\n          recordType\\n          __typename\\n        }\\n        info {\\n          title\\n          __typename\\n        }\\n        __typename\\n      }\\n      productTypes\\n      intents\\n      orderNumber\\n      __typename\\n    }\\n    appliedDimensions {\\n      label\\n      refinements {\\n        label\\n        refinementKey\\n        url\\n        __typename\\n      }\\n      isNumericFilter\\n      __typename\\n    }\\n    primaryFilters {\\n      collapse\\n      dimensionId\\n      isVisualNav\\n      isVisualDimension\\n      isNumericFilter\\n      isColorSwatch\\n      label\\n      nestedRefinementsLimit\\n      refinements {\\n        label\\n        refinementKey\\n        recordCount\\n        selected\\n        imgUrl\\n        url\\n        nestedRefinements {\\n          label\\n          url\\n          recordCount\\n          refinementKey\\n          __typename\\n        }\\n        __typename\\n      }\\n      visualNavSequence\\n      __typename\\n    }\\n    __typename\\n  }\\n}"}'
    #response = requests.post(
    #    'https://www.homedepot.com/federation-gateway/graphql',
    #    params=params,
    #    cookies=cookies,
    #    headers=headers,
    #    data=data,
    #)
    return response

def get_all_pages():
    # Empirical test, only 3 pages of results.
    responses = [get_water_heaters()]
    for i in [24, 48]:
        responses.append(get_water_heaters(offset=i))
    return responses 

def get_all_products():
    api_responses = get_all_pages()
    # Only extract product data
    all_products = [resp.json()['data']['searchModel']['products'] for resp in api_responses]
    # Flatten into a single list
    return [product for product_list in all_products for product in product_list]